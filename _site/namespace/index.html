<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/BlogPosting" class="post-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Namespace Pattern</title>
    <meta name="description" content="JavaScript">

    <!-- Google Authorship Markup -->
    <link rel="author" href="https://plus.google.com/+dumplehomin?rel=author">

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@dumpleHM">
    <meta name="twitter:title" content="Namespace Pattern">
    <meta name="twitter:description" content="JavaScript">
    
    <meta property="twitter:image:src" content="/assets/img/dica-rapida-2/main.png">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="/namespace/">
    <meta property="og:title" content="Namespace Pattern">
    
    <meta property="og:image" content="/assets/img/dica-rapida-2/main.png">
    
    <meta property="og:description" content="JavaScript">
    <meta property="og:site_name" content="dumpleHM - Beautiful Dreamer">

    <!-- Social: Google+ / Schema.org  -->
    <meta itemprop="name" content="Namespace Pattern"/>
    <meta itemprop="description" content="JavaScript">
    <meta itemprop="image" content="/assets/img/blog-image.png"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico" type="image/x-icon" />
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />
    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="dumpleHM Blog">
    <meta name="msapplication-TileColor" content="#0562DC">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#EB7728">

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="/namespace/">
    <link rel="alternate" type="application/rss+xml" title="dumpleHM - Beautiful Dreamer" href="/feed.xml" />
</head>

    <body>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 805 1024"><path class="path1" d="M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"/></symbol></defs></svg>

        <header class="bar-header">
    <h1 class="logo">
        <a href="/"></a>
    </h1>
</header>
<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>

<div id="fade" class="overlay"></div>
<a id="slide" class="slideButton fade">
    <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    <svg id="close" class="icon-menu"><use xlink:href="#icon-close"></use></svg>
</a>
<aside id="sidebar">
<nav id="navigation">
  <h2>MENU</h2>
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/javascript">Javascript</a></li>
    
      <li><a href="/series">Series</a></li>
    
      <li><a href="/tags">Tags</a></li>
    
      <li><a href="/about">About Me</a></li>
    
    <li><a class="feed" href="/feed.xml" title="Atom/RSS feed">Feed</a></li>
  </ul>
</nav>
</aside>
<a id="search" class="dosearch">
    <svg class="icon-menu icon-search"><use xlink:href="#icon-search"></use></svg>
</a>

<header class="header-post" role="banner">
     <div class="content">
        
            <time itemprop="datePublished" datetime="2016-08-24T00:00:00+09:00" class="date">24 Aug 2016</time>
        
        <h1 class="post-title" itemprop="name">Namespace Pattern</h1>
        <p itemprop="description" class="subtitle">JavaScript</p>
    </div>
</header>
        <section class="post">

            <article role="article" id="post" class="post-content" itemprop="articleBody">
                <p>전역변수를 기초로 하는 JavaScript의 단점 때문에 전역 네임스페이스의 오염문제는 많이 신경쓰이는 부분이다. 여러 스크립트가 한 페이지 안에 함꼐 있는 소스코드에서는 전역변수가 많아질 수록 이름이 겹칠 우려가 있다. 뿐만 아니라 어느 곳에서든 접근할 수 있으므로 소스코드의 신뢰성을 떨어뜨릴 수 있다. 이러한 단점을 보완하기 위한 방법으로 네임스페이스 패턴이 있다.</p>

<h3 id="var-">1. var 사용</h3>
<p>JavaScript 에는 암묵적 전역이라는 개념이 있다. var를 사용하지 않고 변수를 선언하거나 선언되지 않은 변수를 사용하면 아무리 지역함수 내에 있더라도 전역에 속하게 된다. 정확히 말하면 전역변수가 아닌 전역객체의 프로퍼티로 생성된다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/*
 * a : 함수에 속하지 않고 var를 사용하여 선언된 전역 변수
 * b : 함수에 속하지 않고 암묵적으로 생성된 전역 객체의 프로퍼티
 * c : 함수에 속하고 암묵적으로 생성된 전역 객체의 프로퍼티
 */</span>
 
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
	<span class="nx">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> 
<span class="p">}());</span>
 
<span class="k">delete</span> <span class="nx">a</span><span class="p">;</span> 
<span class="k">delete</span> <span class="nx">b</span><span class="p">;</span> 
<span class="k">delete</span> <span class="nx">c</span><span class="p">;</span>
 
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">);</span>        <span class="c1">// number 출력</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span><span class="p">);</span>        <span class="c1">// undefined 출력</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">c</span><span class="p">);</span>        <span class="c1">// undefined 출력</span></code></pre></figure>

<p>프로퍼티는 delete연산자로 삭제할 수 있지만 변수는 그렇지 않다는 특성을 통해 변수 b와 c는 전역변수가 아닌 전역객체의 프로퍼티가 됨을 알 수 있다.</p>

<h3 id="section">2. 즉시실행 함수와 즉시 객체 초기화</h3>

<p>전역변수를 줄이기 위해 즉시실행함수(IIFE Immediately-Invoked Function Expression)를 사용하는 방법이 있다. 이 함수는 선언과 동시에 바로 실행되므로 전역변수를 만들지 않아 플러그인이나 라이브러리 등을 만들때 사용되며 모듈패턴의 기반이 되기도 한다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> 
<span class="c1">// 함수 선언문</span>
<span class="kd">function</span> <span class="nx">func</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Sun'</span><span class="p">,</span> <span class="s1">'Mon'</span><span class="p">,</span> <span class="s1">'Tue'</span><span class="p">,</span> <span class="s1">'Wed'</span><span class="p">,</span> <span class="s1">'Thu'</span><span class="p">,</span> <span class="s1">'Fri'</span><span class="p">,</span> <span class="s1">'Sat'</span><span class="p">];</span>
	<span class="kd">var</span> <span class="nx">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="s1">'Today is '</span> <span class="o">+</span> <span class="nx">days</span><span class="p">[</span><span class="nx">today</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()]</span> <span class="o">+</span> <span class="s1">', '</span> <span class="o">+</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> 
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>  
<span class="p">}</span>
<span class="p">);</span>   <span class="c1">// function 출력</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> 
<span class="c1">// 즉시 실행 함수</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Sun'</span><span class="p">,</span> <span class="s1">'Mon'</span><span class="p">,</span> <span class="s1">'Tue'</span><span class="p">,</span> <span class="s1">'Wed'</span><span class="p">,</span> <span class="s1">'Thu'</span><span class="p">,</span> <span class="s1">'Fri'</span><span class="p">,</span> <span class="s1">'Sat'</span><span class="p">];</span>
	<span class="kd">var</span> <span class="nx">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="s1">'Today is '</span> <span class="o">+</span> <span class="nx">days</span><span class="p">[</span><span class="nx">today</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()]</span> <span class="o">+</span> <span class="s1">', '</span> <span class="o">+</span> <span class="nx">today</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> 
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>  <span class="c1">// Today is Mon, 24 출력</span>
<span class="p">}())</span>
<span class="p">);</span>   <span class="c1">// undefined 출력</span></code></pre></figure>

<p>위의 코드에서 typeof 키워드로 각 함수의 타입을 알아보면, 함수 선언문으로 선언된 위쪽의 코드의 함수 타입은 function이다. 이대로 전역범위에 선언하면 전역객체에 func 라는 함수가 추가된다. 반면 익명의 즉시실행함수 표현식으로 선언된 아래쪽 코드의 함수 타입은 undefined이다. 함수가 즉시 실행되고 난 후엔 전역에 남지않고 바로 사라지기 때문이다. 그렇기 때문에 재사용할 필요 없이 한번만 호출할 함수들은 즉시 실행 함수 패턴을 사용하면 전역 네임스페이스를 오염시키지 않는다.</p>

<p>즉시 객체 초기화라는 패턴도 있다. 괄호로 묶어서 바로 초기화 하는 사용방식과, 전역변수를 만들지 않는다는 장점이 즉시실행함수와 비슷하다. 단점으로는 대부분의 JavaScript 압축 도구가 즉시실행함수에 비해 효과적으로 압축하지 못한다는 점이 있다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">({</span>
	<span class="c1">// 속성 정의</span>
	<span class="na">name</span><span class="p">:</span> <span class="s2">"nextree"</span><span class="p">,</span>
 
	<span class="c1">// 객체 메소드 정의</span>
	<span class="na">getName</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
	<span class="p">},</span>
 
	<span class="c1">// 초기화 메소드 정의</span>
	<span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getName</span><span class="p">());</span>   <span class="c1">// nextree 출력</span>
	<span class="p">}</span>
<span class="p">}).</span><span class="nx">init</span><span class="p">();</span></code></pre></figure>

<p>두가지 방법에서 고려해야할 사항으로, 즉시실행함수과 즉시객체초기화의 남용으로 인한 메모리 낭비이다.
JavaScript는 이렇게 할당 없이 정의만 할 경우, 전역 네임스페이스는 건드리지 않더라도, 전역 실행 컨텍스트의 temp=[] 내에 key-value를 추가하게 된다. 이 EC.temp 영역은 개발자가 접근할 수 없는 영역이며 스크립트 내의 다른 영역은 물론 어디에서도 접근할 수 없어 소스코드의 신뢰성에는 큰 도움이 된다. 하지만 같은 이유로 이 패턴을 남용하면 직접 관리할 수 없는 공간에 메모리가 계속 쌓이게 되기 때문에 신뢰성과 메모리의 문제를 함꼐 고민해서 이를 남용하지 않고 적절히 사용해야 한다.</p>

<h3 id="namespace-pattern-">3. 네임스페이스 패턴( Namespace Pattern )</h3>

<h4 id="namespace-pattern">Namespace Pattern이란?</h4>
<p>네임스페이스는 구분이 가능하도록 정해놓은 범위나 영역을 뜻한다. 말 그대로 이름 공간을 선언하여 다른 공간과 구분하도록 한다. 객체나 변수가 겹치지 않는 안전한 소스코드를 만드는 개념이다. 하지만 JavaScript는 아직까지 네임스페이싱을 위한 기능을 지원하지 않기 때문에 다음의 특성을 통해 네임스페이스와 비슷한 효과를 얻을 수 있다.</p>

<ul>
  <li>JavaScrip의 모든 객체는 프로퍼티를 가진다</li>
  <li>그 프로퍼티는 다시 다른 객체를 담을 수 있다.</li>
</ul>

<h4 id="object-literal-namespacing-">3.1 객체 리터럴 네임스페이싱( Object Literal Namespacing )</h4>

<p>가장 기본적인 네임스페이스 패턴으로 하나의 전역 객체를 만든 후 모든 함수, 객체, 변수를 여기에 추가하여 구현한다. 나중에 추가하지 않아도 전역 객체 선언 시에 리터럴로 미리 선언해 주어도 된다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 하나의 전역 객체</span>
<span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">Parent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Parent'</span><span class="p">);</span> <span class="p">};</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">Child</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Child'</span><span class="p">);</span> <span class="p">};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">variable</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 
<span class="c1">// 객체 컨테이너</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="c1">// 객체들을 컨테이너 안에 추가합니다.</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">module1</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">module1</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">};</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">module2</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">Parent</span><span class="p">();</span>                               <span class="c1">// Parent 출력</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">MYAPP</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">module1</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>    <span class="c1">// 1 출력</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">Child</span><span class="p">();</span>                                <span class="c1">// Child 출력</span></code></pre></figure>

<p>이 패턴은 코드 내에서 뿐 아니라 같은 페이지에 존재하는 JS라이브러리나 서드파티 코드와의 이름 충돌도 방지해 주며 체계적이라는 장점이 있다.</p>

<ul>
  <li>하지만 단점도 존재한다.
    <ol>
      <li>모든 변수와 함수에 상위 객체 명을 모두 붙여야 하기 때문에 소스코드량이 늘어난다. 결국 그에 따라 다운로드 해야하는 파일의 크기도 늘어난다.</li>
      <li>전역 인스턴스가 단 하나뿐이기 때문에 코드의 어느 한 부분이 수정되어도 전역 인스턴스를 수정하게 된다. 계속해서 나머지 기능들도 갱신된 상태를 물려받게 된다.</li>
      <li>매번 객체에 접근하는데다, 이름이 중첩되고 길어지므로 검색이 느려지게 된다.</li>
    </ol>
  </li>
</ul>

<p>매번 오브젝트에 접근하는 단점을 해결하고 미래의 유지보수를 위하여 this 키워드를 사용하는 것을 생각할 수도 있다. this를 사용하면 전역객체에 접근하여 검색할 필요가 없이 바로 상위 객체만을 검색할 수 있기 때문이다.</p>

<p>하지만 namespace로 사용되고 있는 객체를 this를 사용하여 참조해서는 안된다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"Hi"</span><span class="p">;</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// 네임스페이스 명을 사용하여 리턴</span>
	<span class="k">return</span> <span class="nx">MYAPP</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="p">};</span>
 
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">());</span>    <span class="c1">// Hi 출력</span>
<span class="kd">var</span> <span class="nx">direct</span> <span class="o">=</span> <span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">direct</span><span class="p">());</span>            <span class="c1">// Hi 출력</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">"Hi"</span><span class="p">;</span>
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// this를 사용하여 리턴</span>
	<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="p">};</span>
 
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">());</span>    <span class="c1">// Hi 출력</span>
<span class="kd">var</span> <span class="nx">direct</span> <span class="o">=</span> <span class="nx">MYAPP</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">direct</span><span class="p">());</span>            <span class="c1">// undefined 출력</span></code></pre></figure>

<p>위쪽 코드는 네임스페이스명을 사용하고, 아래쪽은 this키워드를 사용하여 같은 객체에 속한 변수를 리턴하고자 했다. 위쪽 코드는 네임스페이스명을 사용했을 때나 그를 새로운 전역변수에 대입했을 때나 같은 결과를 출력한다.하지만 아래쪽 코드는 네임스페이스명을 사용하여 출력하였을 때는 원하던 결과를 리턴하지만 그를 새로운 전역변수에 대입하자 undefined를 출력한다. 이는 this 키워드의 특성 때문인데 함수 영역 안에 있는 this키워드는 부모의 자식으로 불렸을 때에만 그 부모 객체를 가리키고 직접 호출하였을 때는 더이상 부모객체가 아닌 전역 객체를 가리키기 때문이다.</p>

<p>그래서 this는 절대 네임스페이스로 사용되고 있는 객체를 참조해서는 안된다. 위와 같이 네임스페이스로부터 식별자를 가져오는데 혼란이 될 수 있기 때문이다. 이러한 네임스페이스 패턴의 단점을 해결하기 위해서는 this키워드가 아닌 샌드박스 패턴을 사용해야 한다.</p>

<h4 id="section-1">3.2 범용 네임스페이스 함수</h4>

<p>프로그램이 복잡해짐에 따라 코드의 각 부분들이 별개의 파일로 분리되어 선택적으로 문서에 포함되는 경우가 많다. 그러다 보면 네임스페이스로 사용할 객체를 선언할 때나 그 내부의 프로퍼티를 정의 할 때, 이미 있는 것을 재정의 하는 일도 생길 수 있다. 이를 확인 하지 못한 채 지나가면 내용을 덮어쓴ㄴ 문제가 생긴다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 1번</span>
<span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="p">{};</span>
 
<span class="c1">// 2번</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">MYAPP</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">}</span>
 
<span class="c1">// 3번</span>
<span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="nx">MYAPP</span> <span class="o">||</span> <span class="p">{};</span></code></pre></figure>

<p>1번처럼 객체를 선언하는 대신, 2번처럼 MYAPP이 미리 선언되었는지를 확인하고 정의해 주어야 한다.
3번은 2번과 똑같이 작동하는 short-hand방식이다. 하지만 이런 식으로 반복해서 확인 작업을 해 주면 중복되는 내요으이 코드가 상당히 많이 생겨날 수 있다. 네임스페이스의 깊이가 깊어질 수록 각 단계 마다 확인해 주어야 하기 때문이다. 그래서 아래의 소스코드와 같이 이 작업을 맡아줄 재사용 가능한 함수를 만드는 것이 좋다.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 가장 상단에 위치할 객체는 먼저 선언합니다. </span>
<span class="c1">// (namespace함수를 전역으로 선언하지 않기 위함입니다.)</span>
<span class="kd">var</span> <span class="nx">MYAPP</span> <span class="o">=</span> <span class="nx">MYAPP</span> <span class="o">||</span> <span class="p">{};</span>
 
<span class="nx">MYAPP</span><span class="p">.</span><span class="nx">nsFunc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ns_string</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// '.'으로 구분된 네임스페이스 표기를 쪼갭니다</span>
	<span class="kd">var</span> <span class="nx">sections</span> <span class="o">=</span> <span class="nx">ns_string</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">),</span>
	    <span class="nx">parent</span> <span class="o">=</span> <span class="nx">MYAPP</span><span class="p">,</span>
	    <span class="nx">i</span><span class="p">;</span>
 
	<span class="c1">// 최상단의 MYAPP객체는 이미 선언되었으므로 제거합니다.</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">sections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">"MYAPP"</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">sections</span> <span class="o">=</span> <span class="nx">sections</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>
 
	<span class="kd">var</span> <span class="nx">s_length</span> <span class="o">=</span> <span class="nx">sections</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">s_length</span><span class="p">;</span> <span class="nx">i</span><span class="o">+=</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// 프로퍼티가 존재하지 않아야만 생성합니다.</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">sections</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">===</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">parent</span><span class="p">[</span><span class="nx">sections</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{};</span>
		<span class="p">}</span>
		<span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">[</span><span class="nx">sections</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">parent</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p>이렇게 만든 네임스페이스 함수를 사용하면 다음과 같은 긴 네임스페이스도 안전하게 만들 수 있다.</p>

            </article>

            <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;&quot;%20/namespace/%20via%20&#64;dumpleHM&hashtags=javaScript,Namespace Pattern,pattern,자바스크립트,네임스페이스 패턴,패턴,"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook"href="https://www.facebook.com/sharer/sharer.php?u=/namespace/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
    <a aria-label="Share on Google Plus" href="https://plus.google.com/share?url=/namespace/"
    onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
        <svg class="icon icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg>
    </a>
</section>
            <section class="author" itemprop="author">
    <div class="details" itemscope itemtype="http://schema.org/Person">
        <img itemprop="image" class="img-rounded" src="/assets/img/blog-author.jpg" alt="">
        <p class="def">Author</p>
        <h3 class="name">
            <a itemprop="name" href="https://plus.google.com/+dumplehomin/posts">dumpleHM</a>
        </h3>
        <p class="desc">Front-end-Developer</p>
        <p><a itemprop="email" class="email" href="mailto:hohomiminini@naver.com">hohomiminini@naver.com</a></p>
        <p><a itemprop="github" class="github" href="https://github.com/dumplehomin">github.com/dumplehomin</a></p>
    </div>
</section>

            <section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'dumpleHM';
        var disqus_title = '';
        var disqus_url = '/namespace/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>

            <footer>
    <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <span class="love">❤</span> by <a href="/">dumpleHM</a></p>
</footer>
<script src="/assets/js/main.js"></script>
        </section>
    </body>
</html>
